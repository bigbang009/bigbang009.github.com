---
layout:     post
title:      k8s网络插件cni工作原理
subtitle:   k8s网络插件cni工作原理
date:       2020-03-07
author:     lwk
catalog: true
tags:
    - linux
    - k8s
	  - cni
---

 

本文从kubelet调用cni插件入手，分析cni插件工作原理

首先进入到kubelet的main入口

![image](https://user-images.githubusercontent.com/36918717/177003780-39ca462b-210f-40a0-916f-949668c4e0b6.png)

![image](https://user-images.githubusercontent.com/36918717/177003784-4b37ae00-1972-4e9b-9ccc-87da693a5d4c.png)

![image](https://user-images.githubusercontent.com/36918717/177003794-4ae677a8-d352-4f48-9044-141f3cad7647.png)

![image](https://user-images.githubusercontent.com/36918717/177003798-63a10bad-c6be-4fff-b214-e72bae8dd3fd.png)

Docker运行时NewDockerService

![image](https://user-images.githubusercontent.com/36918717/177003803-6d847812-0683-4e4a-8cb1-0e5a8bccce80.png)

![image](https://user-images.githubusercontent.com/36918717/177003809-bc2ae948-05c0-4472-b2a3-190001a2d811.png)

![image](https://user-images.githubusercontent.com/36918717/177003812-3b6f2d93-f3c9-4bc0-bd76-4e57d8f9a350.png)

![image](https://user-images.githubusercontent.com/36918717/177003818-0df5d299-b90d-49a4-bdaa-7c98679a07e1.png)

![image](https://user-images.githubusercontent.com/36918717/177003821-cc5cef9c-9b31-4531-8ce5-b99d7cb3e5d5.png)

![image](https://user-images.githubusercontent.com/36918717/177003829-512c1057-f3ea-499a-ba2c-71dc60721c54.png)

![image](https://user-images.githubusercontent.com/36918717/177003831-72bae677-433b-4892-a4a8-f3255fd2db9d.png)

以上主要是CNI获取当前网络环境


